Search.setIndex({"docnames": ["calibration", "index", "intro", "peakfitting"], "filenames": ["calibration.rst", "index.rst", "intro.rst", "peakfitting.rst"], "titles": ["Calibrators", "Euv_fitting: Automated Peak Fitting and Calibration of NIST EUV Spectra", "Introduction", "Peak Fitters"], "terms": {"uncertainti": [0, 1, 2, 3], "analysi": [0, 2], "intens": [0, 1, 2, 3], "etc": 0, "includ": [0, 1, 2, 3], "gener": [0, 3], "function": [0, 1, 3], "print": [0, 2, 3], "plot": [0, 1, 2, 3], "class": [0, 1, 3], "euv_fit": [0, 2, 3], "arr": [0, 3], "parent": 0, "distancecalibr": 0, "dfscalibr": 0, "outlier": 0, "detect": [0, 1, 3], "final": 0, "If": [0, 3], "initi": [0, 3], "from": [0, 1, 2, 3], "arrai": [0, 1, 2, 3], "itself": 0, "expect": 0, "format": 0, "y": [0, 3], "y_uncertainti": 0, "x": [0, 2, 3], "x_uncertainti": 0, "confidence_band": 0, "n_sigma": 0, "2": [0, 2, 3], "func": 0, "none": [0, 3], "find": [0, 2, 3], "confid": 0, "band": 0, "each": [0, 2, 3], "wavelength": [0, 2, 3], "store": [0, 2, 3], "self": [0, 3], "cb": 0, "input": [0, 1, 3], "float": [0, 3], "number": [0, 1, 2, 3], "sigma": [0, 2, 3], "eval_chi_squar": 0, "i": [0, 1, 2, 3], "target": 0, "1": [0, 2, 3], "verbos": 0, "fals": [0, 3], "chi": [0, 1, 2], "squar": [0, 1, 2, 3], "given": [0, 3], "systemat": [0, 1, 2], "paramet": [0, 2, 3], "callabl": [0, 3], "take": 0, "return": [0, 3], "must": [0, 3], "have": [0, 2, 3], "signatur": [0, 3], "arg": 0, "goal": 0, "valu": [0, 2, 3], "boolean": [0, 3], "true": [0, 3], "out": 0, "addit": [0, 2], "inform": [0, 2, 3], "dure": 0, "fit": [0, 2], "outlier_sigma": 0, "3": [0, 2, 3], "iter": [0, 1], "0": [0, 2, 3], "const_uncertainti": 0, "15": [0, 3], "main": [0, 2, 3], "call": [0, 2], "comput": 0, "coeffici": [0, 1, 2], "covari": 0, "thi": [0, 2, 3], "should": 0, "onli": [0, 3], "after": 0, "method": [0, 2, 3], "It": [0, 1, 3], "reli": [0, 1], "data": [0, 1, 2, 3], "solution_arr": 0, "order_data": 0, "present": [0, 1, 2], "complet": [0, 2, 3], "automat": [0, 1, 3], "remov": [0, 1, 2], "can": [0, 1, 2, 3], "penal": 0, "first": [0, 2, 3], "second": [0, 3], "order": [0, 2, 3], "line": [0, 1, 2, 3], "differ": [0, 2, 3], "calcul": [0, 2, 3], "result": [0, 2, 3], "follow": [0, 3], "attribut": [0, 2, 3], "ar": [0, 1, 2, 3], "creat": [0, 2], "popt": [0, 2], "pcov": 0, "matrix": 0, "awai": 0, "point": [0, 3], "befor": 0, "being": [0, 3], "lower": [0, 2], "indic": 0, "more": [0, 3], "aggress": 0, "see": 0, "remove_outli": 0, "detail": 0, "int": [0, 3], "us": [0, 1, 2, 3], "previou": 0, "weight": [0, 3], "peak": [0, 2], "next": [0, 2, 3], "constant": [0, 3], "adu": [0, 2, 3], "add": [0, 3], "all": [0, 2, 3], "channel": [0, 2, 3], "estim": [0, 1], "electron": 0, "nois": [0, 3], "ccd": [0, 1, 2], "camera": [0, 1, 2], "fit_it": 0, "current": [0, 2], "solut": 0, "handl": [0, 3], "show": [0, 2, 3], "ax": [0, 2, 3], "axi": [0, 2], "leav": 0, "One": [0, 2], "one": [0, 2, 3], "without": 0, "test": [0, 3], "now": [0, 2], "multipl": 0, "worst": 0, "begin": 0, "again": 0, "The": [0, 1, 2, 3], "n_sigmas_awai": 0, "removed_line_residu": 0, "removed_line_uncertainti": 0, "calibration_uncertainti": 0, "residual_plot": [0, 2], "titl": [0, 2], "residu": [0, 2], "linestyl": 0, "b": 0, "solve_chi_squar": 0, "x0": [0, 3], "002": 0, "get": [0, 2], "close": [0, 3], "possibl": 0, "alreadi": 0, "less": 0, "than": [0, 2], "chi_squar": 0, "typic": [0, 2, 3], "guess": [0, 3], "uncertainty_fit": 0, "best": [0, 2, 3], "like": [0, 3], "consid": 0, "length": 0, "n": [0, 2, 3], "where": [0, 2, 3], "shape": [0, 2], "child": 0, "identifi": [0, 1, 2, 3], "base": [0, 1, 2], "rel": [0, 3], "distance_calibr": [0, 1, 2], "element": [0, 1, 2], "ne": [0, 2], "num_peak": [0, 2, 3], "30": 0, "timeout": 0, "hdf_dataset": 0, "gauss_loc": 0, "gaussian": [0, 1, 3], "num_poli": [0, 3], "7": [0, 2], "2022": 0, "prefer": 0, "1d": 0, "sum": [0, 3], "multipeakgaussian": [0, 1], "featur": [0, 3], "posit": [0, 3], "toler": 0, "outfil": 0, "return_dict": [0, 3], "tri": 0, "refer": [0, 3], "choos": 0, "match": 0, "maximum": 0, "still": 0, "yield": 0, "string": [0, 3], "file": [0, 1, 2], "locat": [0, 1, 3], "dict": [0, 3], "kei": 0, "dictionari": [0, 2], "row": [0, 2], "ha": [0, 1, 2, 3], "form": 0, "wavelength_uncertainti": 0, "channel_uncertainti": 0, "also": [0, 1, 2], "later": [0, 3], "type": [0, 3], "improve_calibr": 0, "ref_ch": 0, "5": [0, 2, 3], "check": 0, "been": 0, "so": [0, 2], "far": 0, "ani": [0, 2], "lie": 0, "curv": 0, "them": [0, 1, 2, 3], "provid": [1, 2], "high": [1, 2], "level": [1, 3], "interfac": 1, "process": [1, 2, 3], "extrem": 1, "ultraviolet": 1, "written": [1, 3], "entir": [1, 3], "python": 1, "contain": [1, 3], "open": 1, "spectromet": 1, "heavili": 1, "lmfit": [1, 3], "binari": [1, 2], "spe": [1, 2], "numpi": [1, 2, 3], "metadata": [1, 2], "via": 1, "speread": [1, 2], "object": [1, 2, 3], "cosmic": [1, 2], "rai": [1, 2], "cosmicrayfilt": [1, 2], "A": [1, 2, 3], "searchabl": 1, "hdf5": [1, 3], "databas": 1, "last": [1, 2], "ten": [1, 2], "year": 1, "user": 1, "filter": [1, 2], "search": 1, "specif": 1, "date": [1, 2], "beam": 1, "energi": [1, 3], "through": [1, 2], "euvh5_handl": 1, "multibatchgaussian": 1, "easili": 1, "access": [1, 2], "adjust": 1, "manual": 1, "miss": 1, "identif": [1, 3], "convert": [1, 2, 3], "collect": [1, 2], "reduc": [1, 3], "poisson": 1, "statist": 1, "respons": 1, "introduct": 1, "sampl": 1, "fitter": 1, "distanc": 1, "index": [1, 2, 3], "modul": [1, 2], "page": [1, 3], "At": [2, 3], "its": 2, "core": 2, "about": [2, 3], "tool": 2, "autom": 2, "euv": 2, "document": 2, "serv": 2, "guid": 2, "understand": 2, "how": 2, "nist": 2, "repres": [2, 3], "produc": 2, "2048": [2, 3], "frame": 2, "minut": 2, "10": [2, 3], "wa": 2, "taken": 2, "over": 2, "column": [2, 3], "correspond": 2, "pixel": 2, "2047": [2, 3], "As": [2, 3], "increas": [2, 3], "doe": [2, 3], "relationship": 2, "between": [2, 3], "trivial": 2, "focu": 2, "packag": 2, "In": [2, 3], "time": [2, 3], "when": 2, "exampl": [2, 3], "below": [2, 3], "util": [2, 3], "import": [2, 3], "": [2, 3], "270": 2, "img": 2, "load_img": 2, "f": [2, 3], "With": 2, "print_metadata": 2, "gain": 2, "adcrat": 2, "6": 2, "adcresolut": 2, "9": 2, "temp": 2, "rawdat": 2, "09jan2020": 2, "rawtim": 2, "114204": 2, "comment": 2, "we": 2, "an": [2, 3], "idea": 2, "composit": [2, 3], "matplotlib": [2, 3], "pyplot": [2, 3], "plt": [2, 3], "t": [2, 3], "xlabel": 2, "ylabel": 2, "neon": 2, "legend": 2, "rang": 2, "figur": [2, 3], "size": [2, 3], "640x480": [2, 3], "color": 2, "origin": 2, "thing": 2, "notic": 2, "some": [2, 3], "much": 2, "other": [2, 3], "These": 2, "singl": [2, 3], "spike": 2, "come": 2, "do": 2, "experiment": 2, "To": [2, 3], "our": 2, "ad": 2, "effect": 2, "collaps": 2, "five": 2, "higher": 2, "crf": 2, "img_filt": 2, "appli": 2, "defin": 2, "third": 2, "polynomi": 2, "lambda": 2, "k_0": 2, "k_1": 2, "k_2": 2, "k_3": 2, "k_i": 2, "ith": 2, "amount": 2, "determin": [2, 3], "support": 2, "background": [2, 3], "argon": 2, "specifi": 2, "ne_cal": 2, "25": 2, "verifi": 2, "successfulli": 2, "predict": [2, 3], "same": 2, "multi": [2, 3], "gauss_data": [2, 3], "which": 2, "amplitud": [2, 3], "amplitude_std": 2, "center": [2, 3], "center_std": 2, "sigma_std": 2, "plot_fit": [2, 3], "6th": 2, "40659451e": 2, "03": 2, "75744772e": 2, "02": 2, "67844924e": 2, "04": 2, "4": [2, 3], "89162106e": 2, "08213360e": 2, "00": 2, "04436770e": 2, "finish": 2, "well": [2, 3], "known": 2, "print_info": 2, "select": 2, "k0": 2, "658095554982152": 2, "05891793355062553": 2, "k1": 2, "004718422685678915": 2, "00013338296308877779": 2, "k2": 2, "2039248254098424e": 2, "06": 2, "865691255385293e": 2, "08": 2, "k3": 2, "7454680289512726e": 2, "12": [2, 3], "386810238057546e": 2, "11": 2, "highest": [2, 3], "averag": 2, "93e": 2, "63e": 2, "80e": 2, "06e": 2, "9989862473518202": 2, "literatur": [2, 3], "calibr": 3, "essenti": 3, "know": 3, "spectra": 3, "end": 3, "extract": 3, "three": 3, "step": 3, "region": 3, "least": 3, "minim": 3, "both": 3, "distribut": 3, "x_0": 3, "frac": 3, "sqrt": 3, "pi": 3, "exp": 3, "control": 3, "width": 3, "children": 3, "peakfitt": 3, "dummi": 3, "np": 3, "def": 3, "gauss": 3, "amp": 3, "cen": 3, "sig": 3, "linspac": 3, "n_gauss": 3, "1000": 3, "random": 3, "500": 3, "300": 3, "1800": 3, "minimum": 3, "normal": 3, "zip": 3, "400": 3, "note": 3, "argument": 3, "option": 3, "default": 3, "len": 3, "normalize_background": 3, "subplot": 3, "set_xlim": 3, "275": 3, "325": 3, "centroid": 3, "By": 3, "sort": 3, "decreas": 3, "get_centroids_ascend": 3, "best_fit_cent": 3, "best_fit_uncertainti": 3, "header": 3, "14": 3, "20": 3, "true_cent": 3, "3f": 3, "000": 3, "001": 3, "017": 3, "466": 3, "667": 3, "661": 3, "023": 3, "633": 3, "333": 3, "331": 3, "029": 3, "800": 3, "799": 3, "995": 3, "013": 3, "966": 3, "657": 3, "016": 3, "1133": 3, "371": 3, "025": 3, "1300": 3, "012": 3, "1466": 3, "660": 3, "021": 3, "1633": 3, "324": 3, "026": 3, "020": 3, "analyz": 3, "further": 3, "read": 3, "two": 3, "continu": 3, "learn": 3, "leverag": 3, "fast": 3, "drop": 3, "off": 3, "runtim": 3, "isol": 3, "separ": 3, "sever": 3, "enough": 3, "affect": 3, "within": 3, "thei": 3, "group": 3, "batch": 3, "appropri": 3, "linear": 3, "y_err": 3, "resolut": 3, "10000": 3, "x_unit": 3, "y_unit": 3, "section": 3, "sinc": 3, "togeth": 3, "need": 3, "up": 3, "variabl": 3, "whole": 3, "dataset": 3, "simultan": 3, "eval": 3, "interp_strat": 3, "match_data": 3, "helper": 3, "evalu": 3, "model": 3, "li": 3, "otherwis": 3, "linearli": 3, "interpol": 3, "edg": 3, "nearest": 3, "auto_find_peak": 3, "kwarg": 3, "obtain": 3, "voigt": 3, "whether": 3, "keyword": 3, "pass": 3, "get_peak_indic": 3, "fit_batch": 3, "slice": 3, "list": 3, "tupl": 3, "low_index": 3, "high_index": 3, "optim": 3, "signal": 3, "modelresult": 3, "generate_batch": 3, "peak_idx": 3, "width_func": 3, "integ": 3, "half": 3, "dummy_i": 3, "100": 3, "mbg": 3, "200": 3, "23": 3, "92": 3, "108": 3, "get_background": 3, "eval_compon": 3, "poli": 3, "place_in_batch": 3, "idx": 3, "e": 3, "closest": 3, "left": 3, "right": 3, "spectrum": 3, "similar": 3, "treat": 3, "larg": 3, "benefit": 3, "substanti": 3, "instabl": 3, "20000": 3, "disk": 3, "storag": 3, "add_composit": 3, "lit_val": 3, "rel_intens": 3, "multipeak": 3, "built": 3, "501": 3, "502": 3, "rel_intensti": 3, "describ": 3, "entri": 3, "avoid": 3, "circular": 3, "interpret": 3, "0th": 3, "1st": 3, "allow": 3, "vari": 3, "freeli": 3, "due": 3, "2nd": 3, "equival": 3, "you": 3, "could": 3, "add_gaussian": 3, "x_posit": 3, "build": 3, "x_postion": 3, "build_composit": 3, "param": 3, "info": 3, "depend": 3, "build_gaussian": 3, "same_sigma": 3, "n_estimate_point": 3, "forc": 3, "share": 3, "primari": 3, "thread": 3, "read_hdf": 3, "save": 3, "to_hdf": 3}, "objects": {"euv_fitting.calibrate.calibrators": [[0, 0, 1, "", "Calibrator"], [0, 0, 1, "", "Distance_Calibrator"]], "euv_fitting.calibrate.calibrators.Calibrator": [[0, 1, 1, "", "confidence_bands"], [0, 1, 1, "", "eval_chi_square"], [0, 1, 1, "", "fit"], [0, 1, 1, "", "fit_iter"], [0, 1, 1, "", "plot"], [0, 1, 1, "", "remove_outliers"], [0, 1, 1, "", "residual_plot"], [0, 1, 1, "", "solve_chi_square"], [0, 1, 1, "", "uncertainty_fit"]], "euv_fitting.calibrate.calibrators.Distance_Calibrator": [[0, 1, 1, "", "calibrate"], [0, 1, 1, "", "improve_calibration"]], "euv_fitting.calibrate.utils": [[3, 0, 1, "", "MultiBatchGaussian"], [3, 0, 1, "", "MultiPeakGaussian"]], "euv_fitting.calibrate.utils.MultiBatchGaussian": [[3, 1, 1, "", "eval"], [3, 1, 1, "", "fit"], [3, 1, 1, "", "fit_batch"], [3, 1, 1, "", "generate_batches"], [3, 1, 1, "", "get_background"], [3, 1, 1, "", "place_in_batch"]], "euv_fitting.calibrate.utils.MultiPeakGaussian": [[3, 1, 1, "", "add_composite"], [3, 1, 1, "", "add_gaussian"], [3, 1, 1, "", "build_composites"], [3, 1, 1, "", "build_gaussians"], [3, 1, 1, "", "fit"], [3, 1, 1, "", "get_centroids_ascending"], [3, 1, 1, "", "read_hdf"], [3, 1, 1, "", "to_hdf"]]}, "objtypes": {"0": "py:class", "1": "py:method"}, "objnames": {"0": ["py", "class", "Python class"], "1": ["py", "method", "Python method"]}, "titleterms": {"calibr": [0, 1, 2], "process": 0, "distanc": 0, "euv_fit": 1, "autom": 1, "peak": [1, 3], "fit": [1, 3], "nist": 1, "euv": 1, "spectra": [1, 2], "content": [1, 2], "indic": 1, "tabl": 1, "introduct": [2, 3], "sampl": 2, "fitter": 3, "multibatchgaussian": 3, "multipeakgaussian": 3}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"Euv_fitting: Automated Peak Fitting and Calibration of NIST EUV Spectra": [[1, "euv-fitting-automated-peak-fitting-and-calibration-of-nist-euv-spectra"]], "Contents": [[1, null]], "Indices and tables": [[1, "indices-and-tables"]], "Introduction": [[2, "introduction"]], "Spectra Contents": [[2, "spectra-contents"]], "Sample Calibration": [[2, "sample-calibration"]], "Peak Fitters": [[3, "peak-fitters"]], "Introduction to Peak Fitting": [[3, "introduction-to-peak-fitting"]], "MultiBatchGaussian": [[3, "multibatchgaussian"]], "MultiPeakGaussian": [[3, "multipeakgaussian"]], "Calibrators": [[0, "calibrators"]], "Calibration Process": [[0, "calibration-process"]], "Calibrator": [[0, "calibrator"]], "Distance Calibrator": [[0, "distance-calibrator"]]}, "indexentries": {"calibrator (class in euv_fitting.calibrate.calibrators)": [[0, "euv_fitting.calibrate.calibrators.Calibrator"]], "distance_calibrator (class in euv_fitting.calibrate.calibrators)": [[0, "euv_fitting.calibrate.calibrators.Distance_Calibrator"]], "calibrate() (euv_fitting.calibrate.calibrators.distance_calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Distance_Calibrator.calibrate"]], "confidence_bands() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.confidence_bands"]], "eval_chi_square() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.eval_chi_square"]], "fit() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.fit"]], "fit_iter() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.fit_iter"]], "improve_calibration() (euv_fitting.calibrate.calibrators.distance_calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Distance_Calibrator.improve_calibration"]], "plot() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.plot"]], "remove_outliers() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.remove_outliers"]], "residual_plot() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.residual_plot"]], "solve_chi_square() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.solve_chi_square"]], "uncertainty_fit() (euv_fitting.calibrate.calibrators.calibrator method)": [[0, "euv_fitting.calibrate.calibrators.Calibrator.uncertainty_fit"]]}})